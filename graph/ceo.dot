digraph {
overlap=false
splines=true
bgcolor = black
node[style=filled,fillcolor=lightgray,color=white];
edge[arrowtail=odot,dir=back,color=white];

mask -> shackHartmann;
imaging -> shackHartmann;
centroiding -> shackHartmann;
imaging -> pyramid;
centroiding -> pyramid;
bundle -> source;

coordinate_system -> zernikeS;
coordinate_system -> gmt_m1;
coordinate_system -> gmt_m2

mask -> gmt_m1;
mask -> gmt_m2;

zernikeS -> gmt_m1;
zernikeS -> gmt_m2;

vector -> stereoscopic_edge_sensors;
vector -> lateral_edge_sensors;

vector -> coordinate_system;
vector -> bundle;

mask -> bundle;
ray -> bundle;
vector -> ray;
complex_amplitude -> source;

layer -> atmosphere;
profile -> atmosphere;

mask -> BTBT;
mask -> GBTBT;
aaStats -> LMMSE;
paStats -> LMMSE;
BTBT -> LMMSE;
GBTBT -> LMMSE;
iterativeSolvers -> LMMSE;
stopwatch -> LMMSE;
stopwatch -> iterativeSolvers;

gpu;

complex_amplitude -> segmentPistonSensor;
mask -> segmentPistonSensor;
imaging -> segmentPistonSensor;

edge[style=dotted,color=white]
mask -> complex_amplitude;

node[color=darkseagreen,style=rounded,shape=box,fontcolor=whitesmoke];
edge[style=dashed,color=white]

aaStats -> AaStats;
paStats -> PaStats;

centroiding -> Centroiding;
imaging -> Imaging;
cuFloatArray -> Imaging;
cuFloatArray -> Centroiding;

source -> Source;
Complex_amplitude[color=lightskyblue3];
complex_amplitude -> Complex_amplitude;
cuFloatArray -> Complex_amplitude;
Bundle[color=lightskyblue3];
bundle -> Bundle;
cuDoubleArray -> Bundle;
cuIntArray -> Bundle;
Complex_amplitude -> Source[label="wavefront"];
Bundle -> Source[label="rays"];

shackHartmann -> ShackHartmann;
MaskAbstract -> ShackHartmann;
cuFloatArray -> ShackHartmann
Imaging -> ShackHartmann;
Centroiding -> ShackHartmann;

pyramid -> Pyramid;
Imaging -> Pyramid;
Centroiding -> Pyramid;

segmentPistonSensor -> SegmentPistonSensor;
cuFloatArray -> SegmentPistonSensor;

gmt_m1 -> GMT_M1;
gmt_m2 -> GMT_M2;
ZernikeS;
zernikeS -> ZernikeS;
ZernikeS -> GMT_M1;
ZernikeS -> GMT_M2;
GMT_M1 -> GmtMirrors[label="M1"];
GMT_M2 -> GmtMirrors[label="M2"];
Coordinate_system[color=lightskyblue3];
coordinate_system -> Coordinate_system;
Coordinate_system -> GMT_M1;
Coordinate_system -> GMT_M2;
Coordinates[color=lightskyblue3];
Coordinates -> Coordinate_system;
vector -> Coordinates;

stereoscopic_edge_sensors -> StereoscopicEdgeSensors;
Coordinates -> StereoscopicEdgeSensors;

lateral_edge_sensors -> LateralEdgeSensors;
Coordinates -> LateralEdgeSensors;
cuDoubleArray -> LateralEdgeSensors;

AtmosphereAbstract[color=coral3];
atmosphere -> AtmosphereAbstract;
Layer[color=lightskyblue3];
layer -> Layer -> AtmosphereAbstract;
cuFloatArray -> Layer;

MaskAbstract[color=coral3]
mask -> MaskAbstract;
cuFloatArray -> MaskAbstract;
Complex_amplitude -> SegmentPistonSensor;
Imaging -> SegmentPistonSensor;

stopwatch -> StopWatch;

gpu -> cuFloatArray;
gpu -> cuIntArray;
gpu -> cuDoubleArray;
LMMSE -> Lmmse;
LMMSE -> LmmseSH;
cuFloatArray -> Lmmse;
cuFloatArray -> LmmseSH;
cuFloatArray -> AtmosphereAbstract;
cuFloatArray -> AaStats
cuFloatArray -> PaStats

edge[dir=back,arrowtail=normal];

AtmosphereAbstract -> Atmosphere;
AtmosphereAbstract -> GmtAtmosphere;

MaskAbstract -> Mask;
MaskAbstract -> Telescope;
MaskAbstract -> GMT;

GmtMirrors -> GMT_MX;

#{rank = source; mask;}
#{rank = same; gpu; GMT_MX; Atmosphere;}
#{rank = same; Source; ShackHartmann}
#{rank=same; stopwatch; StopWatch;}
{rank = same; cuFloatArray; cuDoubleArray; cuIntArray}
{rank = sink; cuFloatArray}
}